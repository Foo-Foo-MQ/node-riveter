/*
 riveter
 Â© 2012 - Copyright appendTo, LLC
 Author(s): Jim Cowart, Nicholas Cloud, Doug Neiner
 License: Dual licensed MIT (http://opensource.org/licenses/MIT) & GPL (http://opensource.org/licenses/GPL-2.0)
 Version 0.1.1
 */
(function(e,t){typeof module=="object"&&module.exports?module.exports=function(e){return e=e||require("underscore"),t(e)}:typeof define=="function"&&define.amd?define(["underscore"],function(n){return t(n,e)}):e.riveter=t(e._,e)})(this,function(e,t,n){if(!e.deepExtend){var r={"*":function(e,t,n){e[t]=n},object:function(e,t,n){e[t]=o(e[t]||{},n)},array:function(t,n,i){t[n]=[],e.each(i,function(e,i){r[s(e)](t[n],i,e)},this)}},i=function(t){return e.isArray(t)?"array":e.isDate(t)?"date":e.isRegExp(t)?"regex":typeof t},s=function(e){var t=i(e);return r[t]?t:"*"},o=function(t){return e.each(u.call(arguments,1),function(n){e.each(n,function(e,n){r[s(e)](t,n,e)})}),t};e.mixin({deepExtend:o})}var u=Array.prototype.slice,a=function(){var e=u.call(arguments,0);while(e.length)a.rivet(e.shift())};return a.rivet=function(e){e.hasOwnProperty("extend")||(e.extend=function(t,n,r){return a.extend(e,t,n,r)}),e.hasOwnProperty("compose")||(e.compose=function(){return a.compose.apply(this,[e].concat(u.call(arguments,0)))}),e.hasOwnProperty("inherits")||(e.inherits=function(t,n,r){return a.inherits(e,t,n,r)}),e.hasOwnProperty("mixin")||(e.mixin=function(){return a.mixin.apply(this,[e].concat(u.call(arguments,0)))})},a.inherits=function(t,n,r,i){i=i||{};var s,o=function(){},u=function(){n.apply(this,arguments)};return typeof t=="object"?(t.hasOwnProperty("constructor")&&(u=t.constructor),s=t):(u=t,s=t.prototype),a.rivet(u),e.defaults(u,n,r),o.prototype=n.prototype,u.prototype=new o,i.deep?e.deepExtend(u.prototype,s,{constructor:u}):e.extend(u.prototype,s,{constructor:u}),u.__super=n,u.__super__=n.prototype,u},a.extend=function(e,t,n,r){return a.inherits(t,e,n,r)},a.compose=function(){var t=u.call(arguments,0),n=t.shift();a.rivet(n);var r=e.reduce(t,function(e,t){return t.hasOwnProperty("_preInit")&&e.preInit.push(t._preInit),t.hasOwnProperty("_postInit")&&e.postInit.push(t._postInit),t=t.mixin||t,e.items.push(t),e},{items:[],preInit:[],postInit:[]}),i=n.extend({constructor:function(t){var i=u.call(arguments,0);e.each(r.preInit,function(e){e.apply(this,i)},this),n.prototype.constructor.apply(this,i),e.each(r.postInit,function(e){e.apply(this,i)},this)}});return a.rivet(i),e.defaults(i.prototype,e.extend.apply(null,[{}].concat(r.items))),i},a.mixin=function(t){var n=u.call(arguments,0),r=n.shift();return a.rivet(r),t.safe?e.defaults(r.prototype,e.extend.apply(null,[{}].concat(n))):e.extend(r.prototype,e.extend.apply(null,[{}].concat(n))),r},a})